(function(){var n,e,t,i,r,o;i=function(n,e){var t,i,r;for(t in i=[],e.prototype)try{r=e.prototype[t],i.push(null==n[t]&&"function"!=typeof r?n[t]=r:void 0)}catch(o){}return i},(n={}).options=window.Offline&&window.Offline.options||{},t={checks:{xhr:{url:function(){return"/favicon.ico?_="+(new Date).getTime()},timeout:5e3,type:"HEAD"},image:{url:function(){return"/favicon.ico?_="+(new Date).getTime()}},active:"xhr"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0,deDupBody:!1},r=function(n,e){var t,i,r,o,f;for(t=n,i=r=0,o=(f=e.split(".")).length;r<o&&"object"==typeof(t=t[f[i]]);i=++r);return i===f.length-1?t:void 0},n.getOption=function(e){var i,o;return"function"==typeof(o=null!=(i=r(n.options,e))?i:r(t,e))?o():o},"function"==typeof window.addEventListener&&window.addEventListener("online",(function(){return setTimeout(n.confirmUp,100)}),!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",(function(){return n.confirmDown()}),!1),n.state="up",n.markUp=function(){if(n.trigger("confirmed-up"),"up"!==n.state)return n.state="up",n.trigger("up")},n.markDown=function(){if(n.trigger("confirmed-down"),"down"!==n.state)return n.state="down",n.trigger("down")},o={},n.on=function(e,t,i){var r,f,u,c;if((r=e.split(" ")).length>1){for(c=[],f=0,u=r.length;f<u;f++)c.push(n.on(r[f],t,i));return c}return null==o[e]&&(o[e]=[]),o[e].push([i,t])},n.off=function(n,e){var t,i;if(null!=o[n]){if(e){for(t=0,i=[];t<o[n].length;)i.push(o[n][t][1]===e?o[n].splice(t,1):t++);return i}return o[n]=[]}},n.trigger=function(n){var e,t,i,r,f;if(null!=o[n]){for(f=[],e=0,t=(i=o[n].slice(0)).length;e<t;e++)f.push((r=i[e])[1].call(r[0]));return f}},e=function(n,e,t){var i,r,o,f,u;return u=function(){return n.status&&n.status<12e3?e():t()},null===n.onprogress?(i=n.onerror,n.onerror=function(){return t(),"function"==typeof i?i.apply(null,arguments):void 0},f=n.ontimeout,n.ontimeout=function(){return t(),"function"==typeof f?f.apply(null,arguments):void 0},r=n.onload,n.onload=function(){return u(),"function"==typeof r?r.apply(null,arguments):void 0}):(o=n.onreadystatechange,n.onreadystatechange=function(){return 4===n.readyState?u():0===n.readyState&&t(),"function"==typeof o?o.apply(null,arguments):void 0})},n.checks={},n.checks.xhr=function(){var t;(t=new XMLHttpRequest).offline=!1,t.open(n.getOption("checks.xhr.type"),n.getOption("checks.xhr.url"),!0),null!=t.timeout&&(t.timeout=n.getOption("checks.xhr.timeout")),e(t,n.markUp,n.markDown);try{t.send()}catch(i){n.markDown()}return t},n.checks.image=function(){var e;(e=document.createElement("img")).onerror=n.markDown,e.onload=n.markUp,e.src=n.getOption("checks.image.url")},n.checks.down=n.markDown,n.checks.up=n.markUp,n.check=function(){return n.trigger("checking"),n.checks[n.getOption("checks.active")]()},n.confirmUp=n.confirmDown=n.check,n.onXHR=function(n){var e,t,r;if(r=function(e,t){var i;return i=e.open,e.open=function(r,o,f,u,c){return n({type:r,url:o,async:f,flags:t,user:u,password:c,xhr:e}),i.apply(e,arguments)}},t=window.XMLHttpRequest,window.XMLHttpRequest=function(n){var e,i,o;return o=new t(n),r(o,n),i=o.setRequestHeader,o.headers={},o.setRequestHeader=function(n,e){return o.headers[n]=e,i.call(o,n,e)},e=o.overrideMimeType,o.overrideMimeType=function(n){return o.mimeType=n,e.call(o,n)},o},i(window.XMLHttpRequest,t),null!=window.XDomainRequest)return e=window.XDomainRequest,window.XDomainRequest=function(){var n;return n=new e,r(n),n},i(window.XDomainRequest,e)},setTimeout((function(){if(n.getOption("interceptRequests")&&n.onXHR((function(t){var i;if(!1!==(i=t.xhr).offline)return e(i,n.markUp,n.confirmDown)})),n.getOption("checkOnLoad"))return n.check()}),0),window.Offline=n}).call(this),(function(){var n,e,t,i,r,o,f,u,c;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");i=Offline.reconnect={},o=null,r=function(){var n;return null!=i.state&&"inactive"!==i.state&&Offline.trigger("reconnect:stopped"),i.state="inactive",i.remaining=i.delay=null!=(n=Offline.getOption("reconnect.initialDelay"))?n:3},e=function(){var n,e;return n=null!=(e=Offline.getOption("reconnect.delay"))?e:Math.min(Math.ceil(1.5*i.delay),3600),i.remaining=i.delay=n},f=function(){if("connecting"!==i.state)return i.remaining-=1,Offline.trigger("reconnect:tick"),0===i.remaining?u():void 0},u=function(){if("waiting"===i.state)return Offline.trigger("reconnect:connecting"),i.state="connecting",Offline.check()},n=function(){if(Offline.getOption("reconnect"))return r(),i.state="waiting",Offline.trigger("reconnect:started"),o=setInterval(f,1e3)},c=function(){return null!=o&&clearInterval(o),r()},t=function(){if(Offline.getOption("reconnect"))return"connecting"===i.state?(Offline.trigger("reconnect:failure"),i.state="waiting",e()):void 0},i.tryNow=u,r(),Offline.on("down",n),Offline.on("confirmed-down",t),Offline.on("up",c)}).call(this),(function(){var n,e,t,i,r,o;if(!window.Offline)throw new Error("Requests module brought in without offline.js");t=[],o=!1,i=function(n){if(!1!==Offline.getOption("requests"))return Offline.trigger("requests:capture"),"down"!==Offline.state&&(o=!0),t.push(n)},r=function(n){var e,t,i,r,o,f,u,c;if(c=n.xhr,f=n.url,o=n.type,u=n.user,i=n.password,e=n.body,!1!==Offline.getOption("requests")){for(t in c.abort(),c.open(o,f,!0,u,i),r=c.headers)c.setRequestHeader(t,r[t]);return c.mimeType&&c.overrideMimeType(c.mimeType),c.send(e)}},n=function(){return t=[]},e=function(){var e,i,o,f,u,c,l;if(!1!==Offline.getOption("requests")){for(Offline.trigger("requests:flush"),c={},i=0,f=t.length;i<f;i++)l=(u=t[i]).url.replace(/(\?|&)_=[0-9]+/,(function(n,e){return"?"===e?e:""})),Offline.getOption("deDupBody")?(e="[object Object]"===(e=u.body).toString()?JSON.stringify(e):e.toString(),c[u.type.toUpperCase()+" - "+l+" - "+e]=u):c[u.type.toUpperCase()+" - "+l]=u;for(o in c)r(u=c[o]);return n()}},setTimeout((function(){if(!1!==Offline.getOption("requests"))return Offline.on("confirmed-up",(function(){if(o)return o=!1,n()})),Offline.on("up",e),Offline.on("down",(function(){return o=!1})),Offline.onXHR((function(n){var e,t,r,o,f;if(r=n.async,!1!==(f=n.xhr).offline&&(o=function(){return i(n)},t=f.send,f.send=function(e){return n.body=e,t.apply(f,arguments)},r))return null===f.onprogress?(f.addEventListener("error",o,!1),f.addEventListener("timeout",o,!1)):(e=f.onreadystatechange,f.onreadystatechange=function(){return(0===f.readyState||4===f.readyState&&(0===f.status||f.status>=12e3))&&o(),"function"==typeof e?e.apply(null,arguments):void 0})})),Offline.requests={flush:e,clear:n}}),0)}).call(this),(function(){var n,e,t,i,r,o;if(!Offline)throw new Error("Offline simulate brought in without offline.js");for(e=0,t=(i=["up","down"]).length;e<t;e++){o=i[e];try{r=document.querySelector("script[data-simulate='"+o+"']")||("undefined"!=typeof localStorage&&null!==localStorage?localStorage.OFFLINE_SIMULATE:void 0)===o}catch(f){r=!1}}r&&(null==Offline.options&&(Offline.options={}),null==(n=Offline.options).checks&&(n.checks={}),Offline.options.checks.active=o)}).call(this),(function(){var n,e,t,i,r,o,f,u,c,l,a;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");i=function(n){var e;return(e=document.createElement("div")).innerHTML=n,e.children[0]},r=t=null,e=function(n){return c(n),r.className+=" "+n},c=function(n){return r.className=r.className.replace(new RegExp("(^| )"+n.split(" ").join("|")+"( |$)","gi")," ")},f={},o=function(n,t){return e(n),null!=f[n]&&clearTimeout(f[n]),f[n]=setTimeout((function(){return c(n),delete f[n]}),1e3*t)},a=function(n){var e,t,i;for(t in i={day:86400,hour:3600,minute:60,second:1})if(n>=(e=i[t]))return[Math.floor(n/e),t];return["now",""]},l=function(){var n,o;return r=i('<div class="offline-ui"><div class="offline-ui-content"></div></div>'),document.body.appendChild(r),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(r.appendChild(i('<a href class="offline-ui-retry"></a>')),o=function(n){return n.preventDefault(),Offline.reconnect.tryNow()},null!=(n=r.querySelector(".offline-ui-retry")).addEventListener?n.addEventListener("click",o,!1):n.attachEvent("click",o)),e("offline-ui-"+Offline.state),t=r.querySelector(".offline-ui-content")},u=function(){return l(),Offline.on("up",(function(){return c("offline-ui-down"),e("offline-ui-up"),o("offline-ui-up-2s",2),o("offline-ui-up-5s",5)})),Offline.on("down",(function(){return c("offline-ui-up"),e("offline-ui-down"),o("offline-ui-down-2s",2),o("offline-ui-down-5s",5)})),Offline.on("reconnect:connecting",(function(){return e("offline-ui-connecting"),c("offline-ui-waiting")})),Offline.on("reconnect:tick",(function(){var n,i;return e("offline-ui-waiting"),c("offline-ui-connecting"),i=(n=a(Offline.reconnect.remaining))[1],t.setAttribute("data-retry-in-value",n[0]),t.setAttribute("data-retry-in-unit",i)})),Offline.on("reconnect:stopped",(function(){return c("offline-ui-connecting offline-ui-waiting"),t.setAttribute("data-retry-in-value",null),t.setAttribute("data-retry-in-unit",null)})),Offline.on("reconnect:failure",(function(){return o("offline-ui-reconnect-failed-2s",2),o("offline-ui-reconnect-failed-5s",5)})),Offline.on("reconnect:success",(function(){return o("offline-ui-reconnect-succeeded-2s",2),o("offline-ui-reconnect-succeeded-5s",5)}))},"complete"===document.readyState?u():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",u,!1):(n=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&u(),"function"==typeof n?n.apply(null,arguments):void 0})}).call(this);